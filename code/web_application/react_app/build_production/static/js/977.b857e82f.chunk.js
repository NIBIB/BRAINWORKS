"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[977],{3833:function(e,n,t){var r=t(1413),a=t(6305),i=t(9683),o=(t(463),t(184));n.Z=function(e){var n=e.chartXAxis,t=e.chartDatasets,s=e.chartOptions,c=e.chartType;a.kL.register(a.uw,a.f$,a.ZL,a.Dx,a.u,a.De,a.qi,a.od,a.jn,a.vn,a.tt,a.ST,a.FB);var u=s&&(0,r.Z)({},s),l="bar"===c&&{scales:{y:{ticks:{precision:0}}}},d=(0,r.Z)((0,r.Z)({responsive:!0,maintainAspectRatio:!1,tooltips:{position:"nearest"}},l),u),f={labels:n,datasets:t};return(0,o.jsx)(i.kL,{type:c,options:d,data:f})}},8681:function(e,n,t){var r=t(4165),a=t(5861),i=t(5248),o=t(9592),s=t(7843);n.Z=function(){var e=(0,s.Z)().showGlobalAlert,n=(0,o.Z)(),t=n.formikSlice,c=n.newCaptcha,u=function(){e("Something went wrong!","Please try again later")},l=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a){var o,s,u,l,d;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=a.onSuccess,s=a.successMsg,u=a.onFailure,l=a.failureMsg,d=a.data,(0,i._8)(d)?(s?e("Success!",s,"success"):"string"===typeof d.success&&e("Success!",d.success,"success"),o&&o()):((0,i.jk)(d)&&(l?e("Something went wrong!",l,"error"):e("Something went wrong!",d.error),t.captcha.img.length>0&&c()),u&&u());case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return{apiDataAlerter:l,standardAlertError:u,tryCatchWrapper:function(e){try{e()}catch(n){u()}}}}},7843:function(e,n,t){var r=t(6852),a=t(8455),i=t(6579);n.Z=function(){var e=(0,i.C)((function(e){return e.alert})),n=(0,i.T)(),t=(0,r.pm)();return{globalAlert:e,showGlobalAlert:function(e,r,i,o){var s={title:e,desc:r,status:i||"error"};n((0,a.wp)(s)),t({position:"top",title:e,description:r,status:void 0!==i?i:"error",duration:void 0!==o?o:5e3,isClosable:!0})},hideGlobalAlert:function(){n((0,a.JO)())}}}},9592:function(e,n,t){var r=t(4165),a=t(5861),i=t(9439),o=t(5100),s=t(8171),c=t(6579),u=t(5976);n.Z=function(){var e=(0,c.T)(),n=(0,c.C)((function(e){return e.formik})),t=(0,o.ZP)({url:"".concat(u.T,"/new_captcha"),withCredentials:!0},{manual:!0}),l=(0,i.Z)(t,2)[1],d=function(n,t){e((0,s.UX)({img:n,audio:t}))},f=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:n=e.sent,(t=n.data)?d(t.img,t.audio):d("","");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{formikSlice:n,setFormik:function(n){var t=n.key,r=n.fieldsInfo,a=n.loading;e((0,s.ri)({key:t,fieldsInfo:r,loading:a}))},setCaptcha:d,newCaptcha:f,resetGlobalFormik:function(){e((0,s.ME)())}}}},5248:function(e,n,t){function r(e){return null===e||void 0===e?void 0:e.hasOwnProperty("success")}function a(e){return null===e||void 0===e?void 0:e.hasOwnProperty("error")}t.d(n,{UK:function(){return o},_8:function(){return r},_R:function(){return s},jk:function(){return a}});var i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"first",t=arguments.length>2?arguments[2]:void 0;if(e){e=e.toLowerCase();for(var r=0,a=t.length-1,i=null;r<=a;){var o=Math.floor((r+a)/2),s=t[o][0].toLowerCase();s.substr(0,e.length)===e?(i=o,"first"===n?a=o-1:r=o+1):s<e?r=o+1:a=o-1}return i}},o=function(e,n){var t=[],r=i(e,"first",n),a=i(e,"last",n);return null!=r&&null!=a&&(t=n.slice(r,a+1)),t.length>0&&(t.sort((function(e,n){return e[1]<n[1]?1:-1})),t=t.slice(0,5)),t};function s(e,n){return e.filter((function(e){return e.property===n})).shift()}},3977:function(e,n,t){t.r(n),t.d(n,{ADMIN_MENU_ITEMS:function(){return De},default:function(){return Ie}});var r=t(1937),a=t(2571),i=t(1413),o=t(4942),s=t(5987),c=t(9439),u=t(2791),l=t(1367),d=t(2680),f=t(2965),v=t(5436),h=t(9837),p=t(8104),m=t(7200),x=t(7810),b=t(1507),Z=t(6458),y=["defaultIndex","onChange","index","isManual","isLazy","lazyBehavior","orientation","direction"],g=["isDisabled","isFocusable"],j=["children"],w=["children","className"],k=["htmlProps","descendants"],C=["isFitted"],T=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(Boolean).join(" ")};function S(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){n.some((function(n){return null==n||n(e),null==e?void 0:e.defaultPrevented}))}}var _=(0,h.n)(),A=(0,c.Z)(_,4),M=A[0],D=A[1],I=A[2],N=A[3];var O=(0,d.k)({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"}),E=(0,c.Z)(O,2),z=E[0],F=E[1];var G=(0,d.k)({}),L=(0,c.Z)(G,2),U=L[0],P=L[1];function X(e,n){return"".concat(e,"--tab-").concat(n)}function B(e,n){return"".concat(e,"--tabpanel-").concat(n)}var W=(0,d.k)({name:"TabsStylesContext",errorMessage:"useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Tabs />\" "}),Y=(0,c.Z)(W,2),$=Y[0],q=Y[1],J=(0,l.Gp)((function(e,n){var t=(0,l.jC)("Tabs",e),r=(0,f.Lr)(e),a=r.children,o=r.className,d=function(e){var n,t=e.defaultIndex,r=e.onChange,a=e.index,i=e.isManual,o=e.isLazy,l=e.lazyBehavior,d=void 0===l?"unmount":l,f=e.orientation,v=void 0===f?"horizontal":f,h=e.direction,p=void 0===h?"ltr":h,x=(0,s.Z)(e,y),b=(0,u.useState)(null!==t&&void 0!==t?t:0),Z=(0,c.Z)(b,2),g=Z[0],j=Z[1],w=(0,m.T)({defaultValue:null!==t&&void 0!==t?t:0,value:a,onChange:r}),k=(0,c.Z)(w,2),C=k[0],T=k[1];(0,u.useEffect)((function(){null!=a&&j(a)}),[a]);var S=I(),_=(0,u.useId)(),A=null!==(n=e.id)&&void 0!==n?n:_;return{id:"tabs-".concat(A),selectedIndex:C,focusedIndex:g,setSelectedIndex:T,setFocusedIndex:j,isManual:i,isLazy:o,lazyBehavior:d,orientation:v,descendants:S,direction:p,htmlProps:x}}((0,s.Z)(r,w)),v=d.htmlProps,h=d.descendants,p=(0,s.Z)(d,k),x=(0,u.useMemo)((function(){return p}),[p]),b=(v.isFitted,(0,s.Z)(v,C));return u.createElement(M,{value:h},u.createElement(z,{value:x},u.createElement($,{value:t},u.createElement(l.m$.div,(0,i.Z)((0,i.Z)({className:T("chakra-tabs",o),ref:n},b),{},{__css:t.root}),a))))}));J.displayName="Tabs",(0,l.Gp)((function(e,n){var t=function(){var e=F(),n=D(),t=e.selectedIndex,r=e.orientation,a="horizontal"===r,o="vertical"===r,s=(0,u.useState)((function(){return a?{left:0,width:0}:o?{top:0,height:0}:void 0})),l=(0,c.Z)(s,2),d=l[0],f=l[1],v=(0,u.useState)(!1),h=(0,c.Z)(v,2),m=h[0],x=h[1];return(0,p.G)((function(){if(null!=t){var e=n.item(t);if(null!=e){a&&f({left:e.node.offsetLeft,width:e.node.offsetWidth}),o&&f({top:e.node.offsetTop,height:e.node.offsetHeight});var r=requestAnimationFrame((function(){x(!0)}));return function(){r&&cancelAnimationFrame(r)}}}}),[t,a,o,n]),(0,i.Z)({position:"absolute",transitionProperty:"left, right, top, bottom, height, width",transitionDuration:m?"200ms":"0ms",transitionTimingFunction:"cubic-bezier(0, 0, 0.2, 1)"},d)}(),r=(0,i.Z)((0,i.Z)({},e.style),t),a=q();return u.createElement(l.m$.div,(0,i.Z)((0,i.Z)({ref:n},e),{},{className:T("chakra-tabs__tab-indicator",e.className),style:r,__css:a.indicator}))})).displayName="TabIndicator";var R=(0,l.Gp)((function(e,n){var t=function(e){var n=F(),t=n.focusedIndex,r=n.orientation,a=n.direction,s=D(),c=(0,u.useCallback)((function(e){var n,i=function(){var e,n=s.nextEnabled(t);n&&(null==(e=n.node)||e.focus())},c=function(){var e,n=s.prevEnabled(t);n&&(null==(e=n.node)||e.focus())},u="horizontal"===r,l="vertical"===r,d=e.key,f="ltr"===a?"ArrowLeft":"ArrowRight",v="ltr"===a?"ArrowRight":"ArrowLeft",h=(n={},(0,o.Z)(n,f,(function(){return u&&c()})),(0,o.Z)(n,v,(function(){return u&&i()})),(0,o.Z)(n,"ArrowDown",(function(){return l&&i()})),(0,o.Z)(n,"ArrowUp",(function(){return l&&c()})),(0,o.Z)(n,"Home",(function(){var e,n=s.firstEnabled();n&&(null==(e=n.node)||e.focus())})),(0,o.Z)(n,"End",(function(){var e,n=s.lastEnabled();n&&(null==(e=n.node)||e.focus())})),n)[d];h&&(e.preventDefault(),h(e))}),[s,t,r,a]);return(0,i.Z)((0,i.Z)({},e),{},{role:"tablist","aria-orientation":r,onKeyDown:S(e.onKeyDown,c)})}((0,i.Z)((0,i.Z)({},e),{},{ref:n})),r=q(),a=(0,i.Z)({display:"flex"},r.tablist);return u.createElement(l.m$.div,(0,i.Z)((0,i.Z)({},t),{},{className:T("chakra-tabs__tablist",e.className),__css:a}))}));R.displayName="TabList";var V=(0,l.Gp)((function(e,n){var t=function(e){var n=e.children,t=(0,s.Z)(e,j),r=F(),a=r.isLazy,o=r.lazyBehavior,c=P(),l=c.isSelected,d=c.id,f=c.tabId,v=(0,u.useRef)(!1);l&&(v.current=!0);var h=(0,Z.k)({wasSelected:v.current,isSelected:l,enabled:a,mode:o});return(0,i.Z)((0,i.Z)({tabIndex:0},t),{},{children:h?n:null,role:"tabpanel","aria-labelledby":f,hidden:!l,id:d})}((0,i.Z)((0,i.Z)({},e),{},{ref:n})),r=q();return u.createElement(l.m$.div,(0,i.Z)((0,i.Z)({outline:"0"},t),{},{className:T("chakra-tabs__tab-panel",e.className),__css:r.tabpanel}))}));V.displayName="TabPanel";var H=(0,l.Gp)((function(e,n){var t=function(e){var n=F(),t=n.id,r=n.selectedIndex,a=(0,x.W)(e.children).map((function(e,n){return(0,u.createElement)(U,{key:n,value:{isSelected:n===r,id:B(t,n),tabId:X(t,n),selectedIndex:r}},e)}));return(0,i.Z)((0,i.Z)({},e),{},{children:a})}(e),r=q();return u.createElement(l.m$.div,(0,i.Z)((0,i.Z)({},t),{},{width:"100%",ref:n,className:T("chakra-tabs__tab-panels",e.className),__css:r.tabpanels}))}));H.displayName="TabPanels";var K=(0,l.Gp)((function(e,n){var t=q(),r=function(e){var n=e.isDisabled,t=e.isFocusable,r=(0,s.Z)(e,g),a=F(),o=a.setSelectedIndex,c=a.isManual,u=a.id,l=a.setFocusedIndex,d=a.selectedIndex,f=N({disabled:n&&!t}),h=f.index,p=f.register,m=h===d,x=(0,v.h)((0,i.Z)((0,i.Z)({},r),{},{ref:(0,b.lq)(p,e.ref),isDisabled:n,isFocusable:t,onClick:S(e.onClick,(function(){o(h)}))}));return(0,i.Z)((0,i.Z)({},x),{},{id:X(u,h),role:"tab",tabIndex:m?0:-1,type:"button","aria-selected":m,"aria-controls":B(u,h),onFocus:n?void 0:S(e.onFocus,(function(){l(h),!c&&(!n||!t)&&o(h)}))})}((0,i.Z)((0,i.Z)({},e),{},{ref:n})),a=(0,i.Z)({outline:"0",display:"flex",alignItems:"center",justifyContent:"center"},t.tab);return u.createElement(l.m$.button,(0,i.Z)((0,i.Z)({},r),{},{className:T("chakra-tabs__tab",e.className),__css:a}))}));K.displayName="Tab";var Q=t(4621),ee=t(184),ne=function(e){var n=e.items,t=e.tabListStyleProps;return(0,ee.jsxs)(J,{isLazy:!0,variant:"soft-rounded",colorScheme:Q.aL,children:[(0,ee.jsx)(r.Ug,(0,i.Z)((0,i.Z)({},t),{},{children:(0,ee.jsx)(R,{children:n.map((function(e){return(0,ee.jsx)(K,{children:e.name},e.name)}))})})),(0,ee.jsx)(H,{children:n.map((function(e){return(0,ee.jsx)(V,{children:e.component},e.name)}))})]})},te=t(277),re=t(5100),ae=t(5976),ie=t(6305),oe=t(3635),se=t(3833),ce=function(e){var n=e.chartTitle,t=e.chartXAxis,a=e.chartDatasets,o=e.chartOptions,s=e.chartType,c=(0,i.Z)({},o);return(0,ee.jsxs)(oe.Zb,{bg:"white",children:[(0,ee.jsx)(oe.Ol,{children:(0,ee.jsx)(r.X6,{fontSize:"md",w:"100%",children:n})}),(0,ee.jsx)(oe.eW,{h:300,children:(0,ee.jsx)(r.xu,{h:300,w:"100%",children:(0,ee.jsx)(se.Z,{chartXAxis:t,chartDatasets:a,chartOptions:c,chartType:s})})})]})},ue=t(6157);ie.kL.register(ie.uw,ie.f$,ie.ZL,ie.Dx,ie.u,ie.De,ie.Gu);var le=function(){var e=(0,re.ZP)({withCredentials:!0,url:"".concat(ae.T,"/users_stats")}),n=(0,c.Z)(e,1)[0],t=n.data,a=n.loading;return(0,ee.jsx)(ee.Fragment,{children:!a&&(0,ee.jsxs)(r.MI,{w:"100%",spacing:5,columns:2,children:[(0,ee.jsx)(ce,{chartTitle:"Users by countries",chartXAxis:null===t||void 0===t?void 0:t.countries.map((function(e){return e.name})),chartDatasets:[{label:"countries",data:null===t||void 0===t?void 0:t.countries.map((function(e){return e.value})),backgroundColor:null===t||void 0===t?void 0:t.countries.map((function(e,n){return(0,ue.J)(n)}))}],chartType:"pie"}),(0,ee.jsx)(ce,{chartTitle:"Users by positions",chartXAxis:null===t||void 0===t?void 0:t.positions.map((function(e){return e.name})),chartDatasets:[{label:"positions",data:null===t||void 0===t?void 0:t.positions.map((function(e){return e.value})),backgroundColor:null===t||void 0===t?void 0:t.positions.map((function(e,n){return(0,ue.J)(n)}))}],chartType:"pie"}),(0,ee.jsx)(ce,{chartTitle:"Users by account status",chartXAxis:null===t||void 0===t?void 0:t.status.map((function(e){return e.name})),chartDatasets:[{label:"status",data:null===t||void 0===t?void 0:t.status.map((function(e){return e.value})),backgroundColor:[Q.JW,Q.Bt,"black",Q.$g]}],chartType:"pie"}),(0,ee.jsx)(ce,{chartTitle:"Users Over Time",chartXAxis:null===t||void 0===t?void 0:t.created.map((function(e){return new Date(e.name)})),chartDatasets:[{label:"Number of users",data:null===t||void 0===t?void 0:t.created.map((function(e){return e.value})),borderColor:Q.Su,backgroundColor:Q.o6,fill:!0}],chartType:"line",chartOptions:{scales:{x:{type:"time",time:{unit:"week",displayFormats:{day:"d MMM"}}}}}}),(0,ee.jsx)(ce,{chartTitle:"Search frequency",chartXAxis:null===t||void 0===t?void 0:t.search_frequency.map((function(e){return new Date(e.name)})),chartDatasets:[{label:"Search result",data:null===t||void 0===t?void 0:t.search_frequency.map((function(e){return e.value})),borderColor:Q.Su,backgroundColor:Q.o6,fill:!0}],chartType:"line",chartOptions:{scales:{x:{type:"time",time:{unit:"week",displayFormats:{day:"d MMM"}}}}}}),(0,ee.jsx)(ce,{chartTitle:"Top topics searched",chartXAxis:["topics"],chartDatasets:null===t||void 0===t?void 0:t.top_topics.map((function(e,n){return{label:e.name,data:[e.value],backgroundColor:(0,ue.J)(n)}})),chartOptions:{scales:{x:{ticks:{display:!1}}}},chartType:"bar"})]})})},de=function(){return(0,ee.jsx)(r.gC,{spacing:5,children:(0,ee.jsx)(le,{})})},fe=t(4165),ve=t(5861),he=t(8722),pe=t(1197),me=t(2206),xe=t(1089),be=t(5777),Ze=t(7350),ye=t(4926),ge=t(7843),je=t(5108),we=function(){var e=(0,u.useContext)(je.s);return{onGlobalConfirmOpen:function(){e.confirm&&e.confirm.onOpen&&e.confirm.onOpen()},onGlobalConfirmClose:function(){e.confirm&&e.confirm.onClose&&e.confirm.onClose()},showGlobalConfirm:function(n){var t=n.title,r=n.desc,a=n.confirm,o=n.unconfirm;e.setConfirm&&e.setConfirm((function(e){return(0,i.Z)((0,i.Z)({},e),{},{title:t,desc:r,confirm:a,unconfirm:o})}))}}},ke=t(8681),Ce=t(1670),Te={0:"User",1:"Manager",2:"Admin"},Se=t(3621),_e=t(3853),Ae=function(e){var n=e.onClose,t=e.isOpen,a=e.selectedUser,o=e.setSelectedUser,s=(0,Ce.Z)().user,c=(0,ge.Z)().showGlobalAlert,u=we(),l=u.onGlobalConfirmOpen,d=u.showGlobalConfirm,f=(0,Se.Z)({url:"build_form/manager_user_form",method:"POST"}).postAxios,v=(0,ke.Z)(),h=v.apiDataAlerter,p=v.standardAlertError,m=function(){var e=(0,ve.Z)((0,fe.Z)().mark((function e(){var n,t,r,s,u,l;return(0,fe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){o((function(e){if(e)return(0,i.Z)((0,i.Z)({},e),{},{admin:1})}))},t=function(){o((function(e){if(e)return(0,i.Z)((0,i.Z)({},e),{},{admin:0})}))},e.prev=2,null!==(null===a||void 0===a?void 0:a.admin)&&0!==(null===a||void 0===a?void 0:a.admin)){e.next=11;break}return e.next=6,f({target_user:null===a||void 0===a?void 0:a.email,action:"promoted"});case 6:r=e.sent,s=r.data,h({data:s,onSuccess:n,successMsg:"You have promoted ".concat(null===a||void 0===a?void 0:a.name)}),e.next=20;break;case 11:if(1!==(null===a||void 0===a?void 0:a.admin)){e.next=19;break}return e.next=14,f({target_user:null===a||void 0===a?void 0:a.email,action:"demoted"});case 14:u=e.sent,l=u.data,h({data:l,onSuccess:t,successMsg:"You have demoted ".concat(null===a||void 0===a?void 0:a.name)}),e.next=20;break;case 19:c("Something went wrong!","You cannot change an admin's role");case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),p();case 25:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,ve.Z)((0,fe.Z)().mark((function e(){var n,t,r,s,c,u;return(0,fe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){o((function(e){if(e)return(0,i.Z)((0,i.Z)({},e),{},{active:!1})}))},t=function(){o((function(e){if(e)return(0,i.Z)((0,i.Z)({},e),{},{active:!0})}))},e.prev=2,null===a||void 0===a||!a.active){e.next=11;break}return e.next=6,f({target_user:null===a||void 0===a?void 0:a.email,action:"banned"});case 6:r=e.sent,s=r.data,h({data:s,onSuccess:n,successMsg:"You have banned ".concat(a.name)}),e.next=16;break;case 11:return e.next=13,f({target_user:null===a||void 0===a?void 0:a.email,action:"un-banned"});case 13:c=e.sent,u=c.data,h({data:u,onSuccess:t,successMsg:"You have unbanned ".concat(null===a||void 0===a?void 0:a.name)});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),p();case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,ve.Z)((0,fe.Z)().mark((function e(){var n,t,r,s,c,u;return(0,fe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){o((function(e){if(e)return(0,i.Z)((0,i.Z)({},e),{},{verified:!1})}))},t=function(){o((function(e){if(e)return(0,i.Z)((0,i.Z)({},e),{},{verified:!0})}))},e.prev=2,null===a||void 0===a||!a.verified){e.next=11;break}return e.next=6,f({target_user:null===a||void 0===a?void 0:a.email,action:"manual un-verification"});case 6:r=e.sent,s=r.data,h({data:s,onSuccess:n,successMsg:"You unverfied ".concat(a.name,"'s email")}),e.next=16;break;case 11:return e.next=13,f({target_user:null===a||void 0===a?void 0:a.email,action:"manual verification"});case 13:c=e.sent,u=c.data,h({data:u,onSuccess:t,successMsg:"You verfied ".concat(null===a||void 0===a?void 0:a.name,"'s email")});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),p();case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),Z=[{name:null!==a&&void 0!==a&&a.verified?"Verfied email":"Unverified email",property:"email",editTitle:null!==a&&void 0!==a&&a.verified?"Unverify email":"Verify email",editFunction:b},{name:"Role",property:"admin",dictionary:Te},{name:null!==a&&void 0!==a&&a.active?"Active account":"Banned account",property:"isLoggedIn"},{name:"Company",property:"company"},{name:"Country",property:"country"},{name:"Department",property:"department"},{name:"Purpose",property:"purpose"}];return(0,ee.jsxs)(Ze.u_,{onClose:n,isOpen:t,isCentered:!0,children:[(0,ee.jsx)(Ze.ZA,{}),(0,ee.jsxs)(Ze.hz,{maxW:"4xl",children:[(0,ee.jsx)(Ze.xB,{children:(0,ee.jsxs)(r.Ug,{justify:"space-between",pt:10,children:[(0,ee.jsxs)(r.X6,{children:["Edit ",null===a||void 0===a?void 0:a.name]}),2===(null===s||void 0===s?void 0:s.admin)&&(0,ee.jsxs)(ye.v2,{children:[(0,ee.jsx)(ye.j2,{as:be.hU,"aria-label":"Options",icon:(0,ee.jsx)(_e.cur,{}),variant:"outline"}),(0,ee.jsxs)(ye.qy,{fontSize:"md",children:[(0,ee.jsx)(ye.sN,{icon:(0,ee.jsx)(_e.We9,{}),onClick:function(){var e=function(){o(void 0),n()},t=function(){var n=(0,ve.Z)((0,fe.Z)().mark((function n(){var t,r;return(0,fe.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f({target_user:null===a||void 0===a?void 0:a.email,action:"deleted"});case 3:t=n.sent,r=t.data,h({data:r,onSuccess:e,successMsg:"You have deleted ".concat(null===a||void 0===a?void 0:a.name)}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),p();case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();l&&(d({title:"This action cannot be undone",desc:"Are you sure you want to delete ".concat(null===a||void 0===a?void 0:a.name,"? "),confirm:t}),l())},children:"Delete user"}),(0,ee.jsx)(ye.sN,{icon:(0,ee.jsx)(_e.bcx,{}),onClick:x,children:null!==a&&void 0!==a&&a.active?"Ban user":"Unban user"}),(0,ee.jsx)(ye.sN,{icon:(0,ee.jsx)(_e.HR2,{}),onClick:m,children:1===(null===a||void 0===a?void 0:a.admin)?"Demote to user":"Promote to manager"})]})]})]})}),(0,ee.jsx)(r.iz,{}),(0,ee.jsx)(Ze.ol,{}),(0,ee.jsx)(Ze.fe,{py:5,children:(0,ee.jsx)(r.gC,{align:"flex-start",spacing:5,children:a&&Z.map((function(e,n){return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)(r.Ug,{children:[(0,ee.jsx)(r.X6,{fontSize:"md",children:e.name}),(0,ee.jsx)(r.xv,{children:e.dictionary?e.dictionary[a[e.property]]:"string"!==typeof a[e.property]||a[e.property].length>0?a[e.property]:"Not available"}),e.editTitle&&e.editFunction&&(0,ee.jsx)(be.zx,{size:"sm",onClick:e.editFunction,children:e.editTitle})]},n),(0,ee.jsx)(r.iz,{})]})}))})}),(0,ee.jsx)(Ze.mz,{children:(0,ee.jsx)(be.zx,{onClick:n,children:"Close"})})]})]})},Me=function(){var e=(0,u.useState)(""),n=(0,c.Z)(e,2),t=n[0],a=n[1],i=(0,u.useState)(),o=(0,c.Z)(i,2),s=o[0],l=o[1],d=(0,u.useState)([]),f=(0,c.Z)(d,2),v=f[0],h=f[1],p=(0,pe.qY)(),m=p.isOpen,x=p.onOpen,b=p.onClose,Z=(0,Se.Z)({url:"build_form/search_user_form",method:"POST"}).postAxios;(0,u.useEffect)((function(){var e=setTimeout((0,ve.Z)((0,fe.Z)().mark((function e(){var n,r,a;return(0,fe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z({query:t,page:1});case 2:n=e.sent,null!==(r=n.data)&&void 0!==r&&r.success&&h(null===(a=r.success)||void 0===a?void 0:a.users);case 5:case"end":return e.stop()}}),e)}))),700);return function(){clearTimeout(e)}}),[t,m]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Ae,{isOpen:m,onClose:b,onOpen:x,selectedUser:s,setSelectedUser:l}),(0,ee.jsxs)(r.gC,{w:"100%",children:[(0,ee.jsxs)(me.BZ,{children:[(0,ee.jsx)(me.Z8,{pointerEvents:"none",children:(0,ee.jsx)(he.GV,{color:Q.u})}),(0,ee.jsx)(me.II,{onChange:function(e){a(e.target.value)},value:t,placeholder:"Search for a user's name, email address, or ID",bg:"white"})]}),(0,ee.jsx)(xe.xJ,{h:500,w:"100%",overflowY:"auto",border:"1px",borderColor:"gray.200",pos:"relative",bg:"white",children:(0,ee.jsxs)(xe.iA,{variant:"simple",children:[(0,ee.jsx)(xe.hr,{children:(0,ee.jsxs)(xe.Tr,{children:[(0,ee.jsx)(xe.Th,{isNumeric:!0,children:"ID"}),(0,ee.jsx)(xe.Th,{children:"Name"}),(0,ee.jsx)(xe.Th,{children:"Email"}),(0,ee.jsx)(xe.Th,{children:"Role"}),(0,ee.jsx)(xe.Th,{})]})}),(0,ee.jsx)(xe.p3,{children:v&&v.length>0&&!v.hasOwnProperty("error")?null===v||void 0===v?void 0:v.map((function(e){return(0,ee.jsxs)(xe.Tr,{children:[(0,ee.jsx)(xe.Td,{isNumeric:!0,children:e.id}),(0,ee.jsx)(xe.Td,{children:e.name}),(0,ee.jsx)(xe.Td,{children:e.email}),(0,ee.jsx)(xe.Td,{children:Te[e.admin]}),(0,ee.jsx)(xe.Td,{children:(0,ee.jsx)(be.zx,{onClick:function(){l(e),x()},children:"Manage"})})]},e.id)})):(0,ee.jsx)(r.M5,{color:Q.u,pos:"absolute",w:"100%",h:"80%",children:"No users found"})})]})})]})]})},De=[{name:"Overview",component:(0,ee.jsx)(de,{})},{name:"Manage",component:(0,ee.jsx)(Me,{})}],Ie=function(){return(0,te.Z)("Admin"),(0,ee.jsxs)(r.xu,{py:100,children:[(0,ee.jsx)(a.Z,{subTitle:"Manage",title:"Administrator",desc:"Manage users or view site statistics",stackProps:{pb:50}}),(0,ee.jsx)(r.W2,{maxW:"6xl",children:(0,ee.jsx)(ne,{items:De})})]})}},6157:function(e,n,t){t.d(n,{J:function(){return a}});var r=t(4621);function a(e){var n=[r.$g,r.Gn,r.Bt,r.JW,r.dV,r.WD,r.Cb,r.h];return n[e%n.length]}}}]);
//# sourceMappingURL=977.b857e82f.chunk.js.map