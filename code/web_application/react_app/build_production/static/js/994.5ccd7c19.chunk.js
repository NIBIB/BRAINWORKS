"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[994],{3324:function(e,n,r){var t=r(1413),i=r(1937),o=r(2791),a=r(184),u=(0,o.forwardRef)((function(e,n){var r=e.children,o=e.boxProps;return(0,a.jsx)(i.xu,(0,t.Z)((0,t.Z)({border:"1px",borderColor:"gray.200",overflow:"hidden",opacity:"100%",bg:"white",h:"100%",w:"100%"},o),{},{ref:n,children:r}))}));n.Z=u},3146:function(e,n,r){r.d(n,{Z:function(){return O}});var t=r(9592),i=r(8703),o=r.n(i),a=r(1937),u=r(6400),l=r(4828),c=r(2206),s=r(5777),d=r(3324),f=r(4621),h=r(3853),p=r(2506),m=r(321),v=r(184),x=function(e){var n,r=e.hideInvalidMsg,i=e.children,o=e.property,a=(0,p.u6)(),u=a.errors,l=(0,t.Z)().formikSlice.fieldsInfo.filter((function(e){return e.property===o}))[0];return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(m.NI,{isRequired:!(null===l||void 0===l||!l.required)&&l.required,isInvalid:!!a.errors[o]&&!!a.touched[o],children:[(0,v.jsx)(m.lX,{htmlFor:o,children:null===l||void 0===l?void 0:l.title}),i,!r&&(0,v.jsx)(m.J1,{children:null===(n=u[o])||void 0===n?void 0:n.toString()})]})})},g=function(){var e=(0,t.Z)(),n=e.formikSlice,r=e.newCaptcha,i=n.captcha;(0,p.u6)(),n.fieldsInfo.filter((function(e){return"math"===e.property}))[0];return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(d.Z,{boxProps:{w:"auto",h:"auto",bg:"gray.50",p:3},children:(0,v.jsxs)(a.gC,{spacing:2,children:[(0,v.jsxs)(a.xu,{w:"100%",children:[(0,v.jsx)(a.X6,{textAlign:"left",fontSize:"xs",color:"gray.500",fontWeight:500,mb:2,children:"CAPTCHA"}),(0,v.jsx)(a.iz,{})]}),(0,v.jsx)(u.Od,{startColor:"white",endColor:"white",isLoaded:i.img.length>0,w:"100%",children:(0,v.jsx)(l.Ee,{border:"1px",borderColor:"gray.300",p:2,h:10,bg:"white",w:"100%",src:o().sanitize(i.img)})}),(0,v.jsxs)(a.Ug,{align:"flex-end",w:"100%",children:[(0,v.jsx)(a.xu,{w:"100%",children:(0,v.jsx)(x,{property:"math",children:(0,v.jsx)(p.gN,{as:c.II,id:"math",autoComplete:"off",name:"math",noValidate:!1})})}),(0,v.jsx)(s.hU,{colorScheme:f.aL,"aria-label":"Refresh",size:"md",icon:(0,v.jsx)(h.ERY,{}),onClick:r})]})]})})})},y=r(8223),Z=function(e){var n=e.property,r=(0,p.u6)(),t=r.values,i=r.setFieldValue;return(0,v.jsxs)(y.Y2,{onChange:function(e){i(n,e)},w:"100%",value:t[n],min:1,bg:"white",max:999,children:[(0,v.jsx)(y.zu,{}),(0,v.jsxs)(y.Fi,{children:[(0,v.jsx)(y.WQ,{}),(0,v.jsx)(y.Y_,{})]})]})},w=r(4165),j=r(5861),b=r(3433),k=r(9439),S=r(5100),C=r(2791),_=r(7843),I=r(4476),A=function(e){var n=e.array,r=e.onClose,t=e.property;return(0,v.jsx)(a.Eq,{children:null===n||void 0===n?void 0:n.map((function(e,i){return(0,v.jsxs)(I.Vp,{size:"sm",variant:"subtle",colorScheme:f.aL,children:[(0,v.jsx)(I.Sn,{children:e}),(0,v.jsx)(I.SD,{onClick:function(){var i=n.filter((function(n){return n!==e}));r(t,i)}})]},i)}))})},F=function(e){var n=e.searchQuery,r=e.curSelected,t=e.show,i=e.setCurSelected,o=e.addFormValue;return(0,v.jsx)(v.Fragment,{children:t&&(0,v.jsx)(a.xu,{id:"tries",border:"1px",borderRadius:"sm",borderColor:"gray.300",w:"100%",pos:"absolute",top:"105%",bg:"white",zIndex:1e3,tabIndex:0,boxShadow:"md",children:(null===n||void 0===n?void 0:n.length)>0?n.map((function(e,t){return(0,v.jsxs)(a.xu,{w:"100%",textAlign:"left",p:"10px",bg:r===t?"gray.100":"white",onMouseOver:function(){i(t)},onClick:function(){o(n[r][0])},children:[e[0],(0,v.jsxs)(a.xu,{as:"span",color:"gray.600",ml:"3",children:[e[1].toLocaleString()," results"]})]},e[0])})):(0,v.jsx)(a.xu,{w:"100%",textAlign:"left",p:"10px",bg:"white",children:(0,v.jsx)(a.xu,{as:"span",color:"gray.600",ml:"3",children:"Your search did not yield any results"})})})})},T=r(5976),V=r(5248),E=function(e){var n,r=e.property,i=(0,t.Z)().formikSlice,o=(0,p.u6)(),u=o.values,l=o.setFieldValue,s=(0,_.Z)().showGlobalAlert,d=(0,C.useRef)(null),f=(0,C.useState)(""),h=(0,k.Z)(f,2),m=h[0],x=h[1],g=(0,C.useState)([]),y=(0,k.Z)(g,2),Z=y[0],I=y[1],E=(0,C.useState)(0),P=(0,k.Z)(E,2),R=P[0],q=P[1],M=(0,C.useState)(!1),O=(0,k.Z)(M,2),z=O[0],U=O[1],G=(0,V._R)(i.fieldsInfo,r),L=function(e){var n;if(0!==e.length)if(null!==(n=u[r])&&void 0!==n&&n.includes(e))s("Error!","Please do not add duplicate values","error",3e3);else{var t=u[r];l(r,t?[].concat((0,b.Z)(t),[e]):[e]),x("")}else s("Error!","Please write a term to add","error",3e3)},D=(0,S.ZP)({url:"".concat(T.T,"/autocomplete/").concat(null===G||void 0===G?void 0:G.autocomplete),withCredentials:!0},{manual:!0}),K=(0,k.Z)(D,2)[1];(0,C.useEffect)((function(){var e=function(){var e=(0,j.Z)((0,w.Z)().mark((function e(){var n,r;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:n=e.sent,r=n.data,I(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();null!==G&&void 0!==G&&G.autocomplete&&e()}),[null===G||void 0===G?void 0:G.autocomplete]);var W=(0,C.useMemo)((function(){if(null!==G&&void 0!==G&&G.autocomplete&&z)return m.length>0?(0,V.UK)(m,Z):(0,V.UK)("a",Z)}),[null===G||void 0===G?void 0:G.autocomplete,m,Z,z]);return(0,v.jsxs)(a.xu,{w:"100%",children:[(null===(n=u[r])||void 0===n?void 0:n.length)>0&&(0,v.jsx)(a.xu,{mb:3,children:(0,v.jsx)(A,{array:u[r],property:r,onClose:l})}),(0,v.jsx)(c.BZ,{children:(0,v.jsx)(c.II,{ref:d,type:"input",id:r,value:m,autoComplete:"off",onChange:function(e){x(e.currentTarget.value)},name:r,onBlur:function(e){setTimeout((function(){U(!1)}),100)},onFocus:function(e){U(!0)},onKeyDown:function(e){var n=e.key;if(z&&(null===W||void 0===W?void 0:W.length)>0){var r=W[R][0];"ArrowDown"===n&&q(R<4?function(e){return e+1}:0),"ArrowUp"===n&&q(R>0?function(e){return e-1}:4),"Enter"!==n&&"Tab"!==n||L(r)}else if("Enter"===n||"Tab"===n){if((null===G||void 0===G?void 0:G.autocomplete.length)>0)return void s("Warning!","Please submit a value from the autocomplete dropdown","warning",3e3);L(m)}}})}),(null===G||void 0===G?void 0:G.autocomplete.length)>0&&(0,v.jsx)(F,{searchQuery:W,curSelected:R,setCurSelected:q,show:z,addFormValue:L})]})},P=r(7717),R=r(5684),q={select:P.Ph,input:c.II,textarea:R.g},M=function(e){var n=e.property,r=(0,t.Z)().formikSlice.fieldsInfo.filter((function(e){return e.property===n}))[0];return(0,v.jsx)(p.gN,{as:q[r.component],placeholder:null===r||void 0===r?void 0:r.placeholder,id:n,autoComplete:r.suggest,name:n,type:r.type,noValidate:!1,children:r.options&&r.options.map((function(e,n){return(0,v.jsx)("option",{children:e},n)}))})},O=function(e){var n=e.property,r=(0,t.Z)().formikSlice.fieldsInfo.filter((function(e){return e.property===n}))[0];return"math"===r.component?(0,v.jsx)(g,{}):"stringArray"===r.component?(0,v.jsx)(x,{property:n,children:(0,v.jsx)(E,{property:n})}):"number"===r.component?(0,v.jsx)(x,{property:n,children:(0,v.jsx)(Z,{property:n})}):"select"===r.component||"input"===r.component||"textarea"===r.component?(0,v.jsx)(x,{property:n,children:(0,v.jsx)(M,{property:n})}):(0,v.jsx)("div",{children:"Component does not have valid match"})}},1593:function(e,n,r){r.d(n,{Z:function(){return w}});var t=r(4165),i=r(1413),o=r(5861),a=r(9439),u=r(4021),l=r(6871),c=r(2791),s=r(826),d=r(9592),f=r(2506),h=r(184),p=function(e){var n=e.children,r=e.noValidate,t=e.handleSubmit;return(0,h.jsx)("form",{onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||e.preventDefault()},onSubmit:t,noValidate:void 0!==r&&r,children:n})},m=r(1937),v=function(){return(0,h.jsx)(m.kC,{h:"90vh",align:"center",justify:"center",children:(0,h.jsxs)(m.gC,{maxW:"xl",textAlign:"center",children:[(0,h.jsx)(m.X6,{children:"Invalid link."}),(0,h.jsx)(m.xv,{color:"gray.500",children:"Link may be expired or copied incorrectly. Please make sure you copied the correct link from your email. If that doesn't work try requesting another one."})]})})},x=r(1856),g=r(7406),y=function(e){var n=e.formSession,r=e.postFormInput,i=e.initialValue,a=e.validationSchema,u=e.noValidate,l=e.submitHandler,s=e.children,d=e.invalidToken,m=e.isSubmitting,y=(0,f.TA)({initialValues:i,enableReinitialize:!0,validationSchema:a,onSubmit:l});return(0,c.useEffect)((function(){var e;return n&&y.values&&(e=setTimeout((0,o.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({save_session:!0,values:y.values});case 2:case"end":return e.stop()}}),e)}))),500)),function(){e&&clearTimeout(e)}}),[n,y.values]),(0,h.jsx)(x.M,{children:(0,h.jsx)(g.E.div,{initial:{opacity:0},animate:{opacity:1},children:(0,h.jsx)(f.Hy,{value:y,children:d?(0,h.jsx)(v,{}):(0,h.jsx)(p,{handleSubmit:y.handleSubmit,noValidate:u,children:s({isSubmitting:m})})})})})},Z=r(3621),w=function(e){var n=e.formKey,r=e.resetAfterSubmit,f=e.runAfterSubmit,p=e.noValidate,m=e.formSession,v=e.children,x=(0,c.useState)({key:"",fields_info:[],initial_values:{},validation_schema:{},loading:!0,hasToken:!0,invalidToken:!1,hasCaptcha:!1,csrf_token:"",isSubmitting:!1}),g=(0,a.Z)(x,2),w=g[0],j=g[1],b=(0,Z.Z)({url:"build_form/".concat(n),method:"GET"}).getAxios,k=(0,Z.Z)({url:"build_form/".concat(n),method:"POST"}).postAxios,S=(0,l.UO)(),C=(0,d.Z)(),_=C.setFormik,I=C.setCaptcha,A=C.resetGlobalFormik;(0,c.useEffect)((function(){var e,r=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){var r,o,a,l,c,d,h,p;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(),j((function(e){return(0,i.Z)((0,i.Z)({},e),{},{key:"",loading:!0})})),e.next=4,b();case 4:if(r=e.sent,!((o=r.data).fields_info.filter((function(e){return"token"===e.property})).length>0)){e.next=22;break}return e.next=9,k({validate_token:S.token});case 9:if(a=e.sent,!a.data.hasOwnProperty("error")){e.next=15;break}j((function(e){return(0,i.Z)((0,i.Z)({},e),{},{invalidToken:!0})})),e.next=21;break;case 15:if(1!==o.fields_info.length){e.next=21;break}return e.next=18,k({token:S.token});case 18:l=e.sent,c=l.data,f&&f(c,{});case 21:j((function(e){return(0,i.Z)((0,i.Z)({},e),{},{hasToken:!0})}));case 22:j((function(e){return(0,i.Z)((0,i.Z)({},e),{},{csrf_token:o.csrf_token})})),d=(0,s.cc)(o.validation_schema,o.config),j((function(e){return(0,i.Z)((0,i.Z)({},e),{},{validation_schema:d})})),o.fields_info.filter((function(e){return"token"!==e.property})).forEach((function(e){if(e.refValueFor.length>0){var n=u.object().shape({confirm:u.string().oneOf([u.ref(e.refValueFor),null],"Must match with ".concat(e.refValueFor," field")).required("Required")}),r=d.omit(["confirm"]).concat(n);j((function(e){return(0,i.Z)((0,i.Z)({},e),{},{validation_schema:r})}))}if(e.required&&"stringArray"===e.component){var t={};t[e.property]=u.array().of(u.string()).min(1,"".concat(e.title," must have atleast 1 item")).required();var o=u.object().shape(t),a=d.omit([e.property]).concat(o);j((function(e){return(0,i.Z)((0,i.Z)({},e),{},{validation_schema:a})}))}})),h=o.fields_info.filter((function(e){return"math"===e.property})),h.length>0&&(p=h[0],I(p.img,p.audio)),j((function(e){return(0,i.Z)((0,i.Z)({},e),{},{initial_values:o.initial_values,fields_info:o.fields_info,loading:!1,csrf_token:o.csrf_token})})),_({key:n,loading:!1,fieldsInfo:o.fields_info});case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r(),function(){e}}),[]);var F=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(n,o){var a,u,l,c;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.resetForm,j((function(e){return(0,i.Z)((0,i.Z)({},e),{},{isSubmitting:!0})})),r&&a({values:(0,i.Z)((0,i.Z)({},n),r)}),u=(0,i.Z)({},n),w.hasToken&&(u=(0,i.Z)((0,i.Z)({},n),{},{token:S.token})),e.next=7,k((0,i.Z)({},u));case 7:l=e.sent,c=l.data,f&&f(c,n),j((function(e){return(0,i.Z)((0,i.Z)({},e),{},{isSubmitting:!1})}));case 11:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}();return(0,h.jsx)(h.Fragment,{children:!w.loading&&(0,h.jsx)(y,{postFormInput:k,formSession:m,initialValue:w.initial_values,validationSchema:w.validation_schema,noValidate:p,submitHandler:F,children:v,isSubmitting:w.isSubmitting,invalidToken:w.invalidToken})})}},8681:function(e,n,r){var t=r(4165),i=r(5861),o=r(5248),a=r(9592),u=r(7843);n.Z=function(){var e=(0,u.Z)().showGlobalAlert,n=(0,a.Z)(),r=n.formikSlice,l=n.newCaptcha,c=function(){e("Something went wrong!","Please try again later")},s=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(i){var a,u,c,s,d;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=i.onSuccess,u=i.successMsg,c=i.onFailure,s=i.failureMsg,d=i.data,(0,o._8)(d)?(u?e("Success!",u,"success"):"string"===typeof d.success&&e("Success!",d.success,"success"),a&&a()):((0,o.jk)(d)&&(s?e("Something went wrong!",s,"error"):e("Something went wrong!",d.error),r.captcha.img.length>0&&l()),c&&c());case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return{apiDataAlerter:s,standardAlertError:c,tryCatchWrapper:function(e){try{e()}catch(n){c()}}}}},7843:function(e,n,r){var t=r(6852),i=r(8455),o=r(6579);n.Z=function(){var e=(0,o.C)((function(e){return e.alert})),n=(0,o.T)(),r=(0,t.pm)();return{globalAlert:e,showGlobalAlert:function(e,t,o,a){var u={title:e,desc:t,status:o||"error"};n((0,i.wp)(u)),r({position:"top",title:e,description:t,status:void 0!==o?o:"error",duration:void 0!==a?a:5e3,isClosable:!0})},hideGlobalAlert:function(){n((0,i.JO)())}}}},9592:function(e,n,r){var t=r(4165),i=r(5861),o=r(9439),a=r(5100),u=r(8171),l=r(6579),c=r(5976);n.Z=function(){var e=(0,l.T)(),n=(0,l.C)((function(e){return e.formik})),r=(0,a.ZP)({url:"".concat(c.T,"/new_captcha"),withCredentials:!0},{manual:!0}),s=(0,o.Z)(r,2)[1],d=function(n,r){e((0,u.UX)({img:n,audio:r}))},f=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:n=e.sent,(r=n.data)?d(r.img,r.audio):d("","");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{formikSlice:n,setFormik:function(n){var r=n.key,t=n.fieldsInfo,i=n.loading;e((0,u.ri)({key:r,fieldsInfo:t,loading:i}))},setCaptcha:d,newCaptcha:f,resetGlobalFormik:function(){e((0,u.ME)())}}}},5248:function(e,n,r){function t(e){return null===e||void 0===e?void 0:e.hasOwnProperty("success")}function i(e){return null===e||void 0===e?void 0:e.hasOwnProperty("error")}r.d(n,{UK:function(){return a},_8:function(){return t},_R:function(){return u},jk:function(){return i}});var o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"first",r=arguments.length>2?arguments[2]:void 0;if(e){e=e.toLowerCase();for(var t=0,i=r.length-1,o=null;t<=i;){var a=Math.floor((t+i)/2),u=r[a][0].toLowerCase();u.substr(0,e.length)===e?(o=a,"first"===n?i=a-1:t=a+1):u<e?t=a+1:i=a-1}return o}},a=function(e,n){var r=[],t=o(e,"first",n),i=o(e,"last",n);return null!=t&&null!=i&&(r=n.slice(t,i+1)),r.length>0&&(r.sort((function(e,n){return e[1]<n[1]?1:-1})),r=r.slice(0,5)),r};function u(e,n){return e.filter((function(e){return e.property===n})).shift()}}}]);
//# sourceMappingURL=994.5ccd7c19.chunk.js.map