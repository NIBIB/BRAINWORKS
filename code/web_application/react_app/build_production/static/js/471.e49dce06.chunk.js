"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[471],{1593:function(n,e,t){t.d(e,{Z:function(){return y}});var r=t(4165),i=t(1413),a=t(5861),o=t(9439),c=t(4021),u=t(6871),s=t(2791),l=t(826),f=t(9592),d=t(2506),h=t(184),v=function(n){var e=n.children,t=n.noValidate,r=n.handleSubmit;return(0,h.jsx)("form",{onKeyDown:function(n){"Enter"!==n.code&&"NumpadEnter"!==n.code||n.preventDefault()},onSubmit:r,noValidate:void 0!==t&&t,children:e})},m=t(1937),p=function(){return(0,h.jsx)(m.kC,{h:"90vh",align:"center",justify:"center",children:(0,h.jsxs)(m.gC,{maxW:"xl",textAlign:"center",children:[(0,h.jsx)(m.X6,{children:"Invalid link."}),(0,h.jsx)(m.xv,{color:"gray.500",children:"Link may be expired or copied incorrectly. Please make sure you copied the correct link from your email. If that doesn't work try requesting another one."})]})})},Z=t(1856),g=t(7406),k=function(n){var e=n.formSession,t=n.postFormInput,i=n.initialValue,o=n.validationSchema,c=n.noValidate,u=n.submitHandler,l=n.children,f=n.invalidToken,m=n.isSubmitting,k=(0,d.TA)({initialValues:i,enableReinitialize:!0,validationSchema:o,onSubmit:u});return(0,s.useEffect)((function(){var n;return e&&k.values&&(n=setTimeout((0,a.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({save_session:!0,values:k.values});case 2:case"end":return n.stop()}}),n)}))),500)),function(){n&&clearTimeout(n)}}),[e,k.values]),(0,h.jsx)(Z.M,{children:(0,h.jsx)(g.E.div,{initial:{opacity:0},animate:{opacity:1},children:(0,h.jsx)(d.Hy,{value:k,children:f?(0,h.jsx)(p,{}):(0,h.jsx)(v,{handleSubmit:k.handleSubmit,noValidate:c,children:l({isSubmitting:m})})})})})},x=t(3621),y=function(n){var e=n.formKey,t=n.resetAfterSubmit,d=n.runAfterSubmit,v=n.noValidate,m=n.formSession,p=n.children,Z=(0,s.useState)({key:"",fields_info:[],initial_values:{},validation_schema:{},loading:!0,hasToken:!0,invalidToken:!1,hasCaptcha:!1,csrf_token:"",isSubmitting:!1}),g=(0,o.Z)(Z,2),y=g[0],b=g[1],w=(0,x.Z)({url:"build_form/".concat(e),method:"GET"}).getAxios,_=(0,x.Z)({url:"build_form/".concat(e),method:"POST"}).postAxios,S=(0,u.UO)(),j=(0,f.Z)(),C=j.setFormik,A=j.setCaptcha,T=j.resetGlobalFormik;(0,s.useEffect)((function(){var n,t=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var t,a,o,u,s,f,h,v;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return T(),b((function(n){return(0,i.Z)((0,i.Z)({},n),{},{key:"",loading:!0})})),n.next=4,w();case 4:if(t=n.sent,!((a=t.data).fields_info.filter((function(n){return"token"===n.property})).length>0)){n.next=22;break}return n.next=9,_({validate_token:S.token});case 9:if(o=n.sent,!o.data.hasOwnProperty("error")){n.next=15;break}b((function(n){return(0,i.Z)((0,i.Z)({},n),{},{invalidToken:!0})})),n.next=21;break;case 15:if(1!==a.fields_info.length){n.next=21;break}return n.next=18,_({token:S.token});case 18:u=n.sent,s=u.data,d&&d(s,{});case 21:b((function(n){return(0,i.Z)((0,i.Z)({},n),{},{hasToken:!0})}));case 22:b((function(n){return(0,i.Z)((0,i.Z)({},n),{},{csrf_token:a.csrf_token})})),f=(0,l.cc)(a.validation_schema,a.config),b((function(n){return(0,i.Z)((0,i.Z)({},n),{},{validation_schema:f})})),a.fields_info.filter((function(n){return"token"!==n.property})).forEach((function(n){if(n.refValueFor.length>0){var e=c.object().shape({confirm:c.string().oneOf([c.ref(n.refValueFor),null],"Must match with ".concat(n.refValueFor," field")).required("Required")}),t=f.omit(["confirm"]).concat(e);b((function(n){return(0,i.Z)((0,i.Z)({},n),{},{validation_schema:t})}))}if(n.required&&"stringArray"===n.component){var r={};r[n.property]=c.array().of(c.string()).min(1,"".concat(n.title," must have atleast 1 item")).required();var a=c.object().shape(r),o=f.omit([n.property]).concat(a);b((function(n){return(0,i.Z)((0,i.Z)({},n),{},{validation_schema:o})}))}})),h=a.fields_info.filter((function(n){return"math"===n.property})),h.length>0&&(v=h[0],A(v.img,v.audio)),b((function(n){return(0,i.Z)((0,i.Z)({},n),{},{initial_values:a.initial_values,fields_info:a.fields_info,loading:!1,csrf_token:a.csrf_token})})),C({key:e,loading:!1,fieldsInfo:a.fields_info});case 30:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return t(),function(){n}}),[]);var V=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(e,a){var o,c,u,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.resetForm,b((function(n){return(0,i.Z)((0,i.Z)({},n),{},{isSubmitting:!0})})),t&&o({values:(0,i.Z)((0,i.Z)({},e),t)}),c=(0,i.Z)({},e),y.hasToken&&(c=(0,i.Z)((0,i.Z)({},e),{},{token:S.token})),n.next=7,_((0,i.Z)({},c));case 7:u=n.sent,s=u.data,d&&d(s,e),b((function(n){return(0,i.Z)((0,i.Z)({},n),{},{isSubmitting:!1})}));case 11:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return(0,h.jsx)(h.Fragment,{children:!y.loading&&(0,h.jsx)(k,{postFormInput:_,formSession:m,initialValue:y.initial_values,validationSchema:y.validation_schema,noValidate:v,submitHandler:V,children:p,isSubmitting:y.isSubmitting,invalidToken:y.invalidToken})})}},548:function(n,e,t){var r=t(1413),i=t(1937),a=t(3504),o=t(184);e.Z=function(n){var e=n.text,t=n.link,c=n.linkProps;return(0,o.jsx)(i.rU,(0,r.Z)((0,r.Z)({color:"blue.600",as:a.rU,to:t},c),{},{children:e}))}},8681:function(n,e,t){var r=t(4165),i=t(5861),a=t(5248),o=t(9592),c=t(7843);e.Z=function(){var n=(0,c.Z)().showGlobalAlert,e=(0,o.Z)(),t=e.formikSlice,u=e.newCaptcha,s=function(){n("Something went wrong!","Please try again later")},l=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i){var o,c,s,l,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=i.onSuccess,c=i.successMsg,s=i.onFailure,l=i.failureMsg,f=i.data,(0,a._8)(f)?(c?n("Success!",c,"success"):"string"===typeof f.success&&n("Success!",f.success,"success"),o&&o()):((0,a.jk)(f)&&(l?n("Something went wrong!",l,"error"):n("Something went wrong!",f.error),t.captcha.img.length>0&&u()),s&&s());case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return{apiDataAlerter:l,standardAlertError:s,tryCatchWrapper:function(n){try{n()}catch(e){s()}}}}},7843:function(n,e,t){var r=t(6852),i=t(8455),a=t(6579);e.Z=function(){var n=(0,a.C)((function(n){return n.alert})),e=(0,a.T)(),t=(0,r.pm)();return{globalAlert:n,showGlobalAlert:function(n,r,a,o){var c={title:n,desc:r,status:a||"error"};e((0,i.wp)(c)),t({position:"top",title:n,description:r,status:void 0!==a?a:"error",duration:void 0!==o?o:5e3,isClosable:!0})},hideGlobalAlert:function(){e((0,i.JO)())}}}},9592:function(n,e,t){var r=t(4165),i=t(5861),a=t(9439),o=t(5100),c=t(8171),u=t(6579),s=t(5976);e.Z=function(){var n=(0,u.T)(),e=(0,u.C)((function(n){return n.formik})),t=(0,o.ZP)({url:"".concat(s.T,"/new_captcha"),withCredentials:!0},{manual:!0}),l=(0,a.Z)(t,2)[1],f=function(e,t){n((0,c.UX)({img:e,audio:t}))},d=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(){var e,t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l();case 2:e=n.sent,(t=e.data)?f(t.img,t.audio):f("","");case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{formikSlice:e,setFormik:function(e){var t=e.key,r=e.fieldsInfo,i=e.loading;n((0,c.ri)({key:t,fieldsInfo:r,loading:i}))},setCaptcha:f,newCaptcha:d,resetGlobalFormik:function(){n((0,c.ME)())}}}},5248:function(n,e,t){function r(n){return null===n||void 0===n?void 0:n.hasOwnProperty("success")}function i(n){return null===n||void 0===n?void 0:n.hasOwnProperty("error")}t.d(e,{UK:function(){return o},_8:function(){return r},_R:function(){return c},jk:function(){return i}});var a=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"first",t=arguments.length>2?arguments[2]:void 0;if(n){n=n.toLowerCase();for(var r=0,i=t.length-1,a=null;r<=i;){var o=Math.floor((r+i)/2),c=t[o][0].toLowerCase();c.substr(0,n.length)===n?(a=o,"first"===e?i=o-1:r=o+1):c<n?r=o+1:i=o-1}return a}},o=function(n,e){var t=[],r=a(n,"first",e),i=a(n,"last",e);return null!=r&&null!=i&&(t=e.slice(r,i+1)),t.length>0&&(t.sort((function(n,e){return n[1]<e[1]?1:-1})),t=t.slice(0,5)),t};function c(n,e){return n.filter((function(n){return n.property===e})).shift()}},5471:function(n,e,t){t.r(e);var r=t(1593),i=t(8681),a=t(1670),o=t(8388),c=t(6485),u=t(6560),s=t(548),l=t(277),f=t(184);e.default=function(){(0,l.Z)("Verify email");var n=(0,a.Z)().user,e=(0,i.Z)().apiDataAlerter;return(0,f.jsx)(r.Z,{formKey:"verify_email_form",runAfterSubmit:function(n){e({data:n,successMsg:"You have verified your email ".concat(n.success)})},children:function(e){e.isSubmitting;return(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(c.Z,{title:"Success!",desc:"You have verified your email!"}),(0,f.jsx)(u.Z,{children:n.isLoggedIn?(0,f.jsx)(s.Z,{link:"/",text:"Get started"}):(0,f.jsx)(s.Z,{link:"/signin",text:"Back to sign in"})})]})}})}},8388:function(n,e,t){var r=t(9439),i=t(5266),a=t(1937),o=t(3635),c=t(184);e.Z=function(n){var e=n.children,t=(0,i.ac)("(max-width: 500px)"),u=(0,r.Z)(t,1)[0];return(0,c.jsx)(a.kC,{w:"100%",h:"90vh",justify:"center",align:"center",children:(0,c.jsx)(o.Zb,{w:u?"90%":"450px",p:5,bg:"white",children:(0,c.jsx)(o.eW,{children:e})})})}},6560:function(n,e,t){var r=t(1937),i=t(184);e.Z=function(n){var e=n.children;return(0,i.jsx)(r.gC,{mt:5,children:e})}},6485:function(n,e,t){var r=t(1937),i=t(184);e.Z=function(n){var e=n.title,t=n.desc;return(0,i.jsxs)(r.gC,{mb:5,children:[(0,i.jsx)(r.X6,{w:"100%",textAlign:"center",children:e}),(0,i.jsx)(r.xv,{textAlign:"center",color:"gray.600",children:t})]})}}}]);
//# sourceMappingURL=471.e49dce06.chunk.js.map