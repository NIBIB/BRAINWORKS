"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[482],{1593:function(n,e,t){t.d(e,{Z:function(){return b}});var r=t(4165),i=t(1413),o=t(5861),a=t(9439),c=t(4021),u=t(6871),s=t(2791),l=t(826),f=t(9592),d=t(2506),h=t(184),v=function(n){var e=n.children,t=n.noValidate,r=n.handleSubmit;return(0,h.jsx)("form",{onKeyDown:function(n){"Enter"!==n.code&&"NumpadEnter"!==n.code||n.preventDefault()},onSubmit:r,noValidate:void 0!==t&&t,children:e})},m=t(1937),p=function(){return(0,h.jsx)(m.kC,{h:"90vh",align:"center",justify:"center",children:(0,h.jsxs)(m.gC,{maxW:"xl",textAlign:"center",children:[(0,h.jsx)(m.X6,{children:"Invalid link."}),(0,h.jsx)(m.xv,{color:"gray.500",children:"Link may be expired or copied incorrectly. Please make sure you copied the correct link from your email. If that doesn't work try requesting another one."})]})})},Z=t(1856),k=t(7406),g=function(n){var e=n.formSession,t=n.postFormInput,i=n.initialValue,a=n.validationSchema,c=n.noValidate,u=n.submitHandler,l=n.children,f=n.invalidToken,m=n.isSubmitting,g=(0,d.TA)({initialValues:i,enableReinitialize:!0,validationSchema:a,onSubmit:u});return(0,s.useEffect)((function(){var n;return e&&g.values&&(n=setTimeout((0,o.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({save_session:!0,values:g.values});case 2:case"end":return n.stop()}}),n)}))),500)),function(){n&&clearTimeout(n)}}),[e,g.values]),(0,h.jsx)(Z.M,{children:(0,h.jsx)(k.E.div,{initial:{opacity:0},animate:{opacity:1},children:(0,h.jsx)(d.Hy,{value:g,children:f?(0,h.jsx)(p,{}):(0,h.jsx)(v,{handleSubmit:g.handleSubmit,noValidate:c,children:l({isSubmitting:m})})})})})},x=t(3621),b=function(n){var e=n.formKey,t=n.resetAfterSubmit,d=n.runAfterSubmit,v=n.noValidate,m=n.formSession,p=n.children,Z=(0,s.useState)({key:"",fields_info:[],initial_values:{},validation_schema:{},loading:!0,hasToken:!0,invalidToken:!1,hasCaptcha:!1,csrf_token:"",isSubmitting:!1}),k=(0,a.Z)(Z,2),b=k[0],y=k[1],w=(0,x.Z)({url:"build_form/".concat(e),method:"GET"}).getAxios,_=(0,x.Z)({url:"build_form/".concat(e),method:"POST"}).postAxios,S=(0,u.UO)(),j=(0,f.Z)(),C=j.setFormik,A=j.setCaptcha,T=j.resetGlobalFormik;(0,s.useEffect)((function(){var n,t=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(){var t,o,a,u,s,f,h,v;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return T(),y((function(n){return(0,i.Z)((0,i.Z)({},n),{},{key:"",loading:!0})})),n.next=4,w();case 4:if(t=n.sent,!((o=t.data).fields_info.filter((function(n){return"token"===n.property})).length>0)){n.next=22;break}return n.next=9,_({validate_token:S.token});case 9:if(a=n.sent,!a.data.hasOwnProperty("error")){n.next=15;break}y((function(n){return(0,i.Z)((0,i.Z)({},n),{},{invalidToken:!0})})),n.next=21;break;case 15:if(1!==o.fields_info.length){n.next=21;break}return n.next=18,_({token:S.token});case 18:u=n.sent,s=u.data,d&&d(s,{});case 21:y((function(n){return(0,i.Z)((0,i.Z)({},n),{},{hasToken:!0})}));case 22:y((function(n){return(0,i.Z)((0,i.Z)({},n),{},{csrf_token:o.csrf_token})})),f=(0,l.cc)(o.validation_schema,o.config),y((function(n){return(0,i.Z)((0,i.Z)({},n),{},{validation_schema:f})})),o.fields_info.filter((function(n){return"token"!==n.property})).forEach((function(n){if(n.refValueFor.length>0){var e=c.object().shape({confirm:c.string().oneOf([c.ref(n.refValueFor),null],"Must match with ".concat(n.refValueFor," field")).required("Required")}),t=f.omit(["confirm"]).concat(e);y((function(n){return(0,i.Z)((0,i.Z)({},n),{},{validation_schema:t})}))}if(n.required&&"stringArray"===n.component){var r={};r[n.property]=c.array().of(c.string()).min(1,"".concat(n.title," must have atleast 1 item")).required();var o=c.object().shape(r),a=f.omit([n.property]).concat(o);y((function(n){return(0,i.Z)((0,i.Z)({},n),{},{validation_schema:a})}))}})),h=o.fields_info.filter((function(n){return"math"===n.property})),h.length>0&&(v=h[0],A(v.img,v.audio)),y((function(n){return(0,i.Z)((0,i.Z)({},n),{},{initial_values:o.initial_values,fields_info:o.fields_info,loading:!1,csrf_token:o.csrf_token})})),C({key:e,loading:!1,fieldsInfo:o.fields_info});case 30:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return t(),function(){n}}),[]);var F=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(e,o){var a,c,u,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=o.resetForm,y((function(n){return(0,i.Z)((0,i.Z)({},n),{},{isSubmitting:!0})})),t&&a({values:(0,i.Z)((0,i.Z)({},e),t)}),c=(0,i.Z)({},e),b.hasToken&&(c=(0,i.Z)((0,i.Z)({},e),{},{token:S.token})),n.next=7,_((0,i.Z)({},c));case 7:u=n.sent,s=u.data,d&&d(s,e),y((function(n){return(0,i.Z)((0,i.Z)({},n),{},{isSubmitting:!1})}));case 11:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return(0,h.jsx)(h.Fragment,{children:!b.loading&&(0,h.jsx)(g,{postFormInput:_,formSession:m,initialValue:b.initial_values,validationSchema:b.validation_schema,noValidate:v,submitHandler:F,children:p,isSubmitting:b.isSubmitting,invalidToken:b.invalidToken})})}},548:function(n,e,t){var r=t(1413),i=t(1937),o=t(3504),a=t(184);e.Z=function(n){var e=n.text,t=n.link,c=n.linkProps;return(0,a.jsx)(i.rU,(0,r.Z)((0,r.Z)({color:"blue.600",as:o.rU,to:t},c),{},{children:e}))}},8681:function(n,e,t){var r=t(4165),i=t(5861),o=t(5248),a=t(9592),c=t(7843);e.Z=function(){var n=(0,c.Z)().showGlobalAlert,e=(0,a.Z)(),t=e.formikSlice,u=e.newCaptcha,s=function(){n("Something went wrong!","Please try again later")},l=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i){var a,c,s,l,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=i.onSuccess,c=i.successMsg,s=i.onFailure,l=i.failureMsg,f=i.data,(0,o._8)(f)?(c?n("Success!",c,"success"):"string"===typeof f.success&&n("Success!",f.success,"success"),a&&a()):((0,o.jk)(f)&&(l?n("Something went wrong!",l,"error"):n("Something went wrong!",f.error),t.captcha.img.length>0&&u()),s&&s());case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return{apiDataAlerter:l,standardAlertError:s,tryCatchWrapper:function(n){try{n()}catch(e){s()}}}}},7843:function(n,e,t){var r=t(6852),i=t(8455),o=t(6579);e.Z=function(){var n=(0,o.C)((function(n){return n.alert})),e=(0,o.T)(),t=(0,r.pm)();return{globalAlert:n,showGlobalAlert:function(n,r,o,a){var c={title:n,desc:r,status:o||"error"};e((0,i.wp)(c)),t({position:"top",title:n,description:r,status:void 0!==o?o:"error",duration:void 0!==a?a:5e3,isClosable:!0})},hideGlobalAlert:function(){e((0,i.JO)())}}}},9592:function(n,e,t){var r=t(4165),i=t(5861),o=t(9439),a=t(5100),c=t(8171),u=t(6579),s=t(5976);e.Z=function(){var n=(0,u.T)(),e=(0,u.C)((function(n){return n.formik})),t=(0,a.ZP)({url:"".concat(s.T,"/new_captcha"),withCredentials:!0},{manual:!0}),l=(0,o.Z)(t,2)[1],f=function(e,t){n((0,c.UX)({img:e,audio:t}))},d=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(){var e,t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l();case 2:e=n.sent,(t=e.data)?f(t.img,t.audio):f("","");case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{formikSlice:e,setFormik:function(e){var t=e.key,r=e.fieldsInfo,i=e.loading;n((0,c.ri)({key:t,fieldsInfo:r,loading:i}))},setCaptcha:f,newCaptcha:d,resetGlobalFormik:function(){n((0,c.ME)())}}}},5248:function(n,e,t){function r(n){return null===n||void 0===n?void 0:n.hasOwnProperty("success")}function i(n){return null===n||void 0===n?void 0:n.hasOwnProperty("error")}t.d(e,{UK:function(){return a},_8:function(){return r},_R:function(){return c},jk:function(){return i}});var o=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"first",t=arguments.length>2?arguments[2]:void 0;if(n){n=n.toLowerCase();for(var r=0,i=t.length-1,o=null;r<=i;){var a=Math.floor((r+i)/2),c=t[a][0].toLowerCase();c.substr(0,n.length)===n?(o=a,"first"===e?i=a-1:r=a+1):c<n?r=a+1:i=a-1}return o}},a=function(n,e){var t=[],r=o(n,"first",e),i=o(n,"last",e);return null!=r&&null!=i&&(t=e.slice(r,i+1)),t.length>0&&(t.sort((function(n,e){return n[1]<e[1]?1:-1})),t=t.slice(0,5)),t};function c(n,e){return n.filter((function(n){return n.property===e})).shift()}},4482:function(n,e,t){t.r(e);var r=t(1593),i=t(8681),o=t(8388),a=t(6485),c=t(6560),u=t(548),s=t(277),l=t(184);e.default=function(){(0,s.Z)("Unlock account");var n=(0,i.Z)().apiDataAlerter;return(0,l.jsx)(r.Z,{formKey:"verify_email_form",runAfterSubmit:function(e){n({data:e,successMsg:"You have unlocked your account ".concat(e.success)})},children:function(n){n.isSubmitting;return(0,l.jsxs)(o.Z,{children:[(0,l.jsx)(a.Z,{title:"Success!",desc:"You have unlocked your account."}),(0,l.jsx)(c.Z,{children:(0,l.jsx)(u.Z,{link:"/signin",text:"Back to sign in"})})]})}})}},8388:function(n,e,t){var r=t(9439),i=t(5266),o=t(1937),a=t(3635),c=t(184);e.Z=function(n){var e=n.children,t=(0,i.ac)("(max-width: 500px)"),u=(0,r.Z)(t,1)[0];return(0,c.jsx)(o.kC,{w:"100%",h:"90vh",justify:"center",align:"center",children:(0,c.jsx)(a.Zb,{w:u?"90%":"450px",p:5,bg:"white",children:(0,c.jsx)(a.eW,{children:e})})})}},6560:function(n,e,t){var r=t(1937),i=t(184);e.Z=function(n){var e=n.children;return(0,i.jsx)(r.gC,{mt:5,children:e})}},6485:function(n,e,t){var r=t(1937),i=t(184);e.Z=function(n){var e=n.title,t=n.desc;return(0,i.jsxs)(r.gC,{mb:5,children:[(0,i.jsx)(r.X6,{w:"100%",textAlign:"center",children:e}),(0,i.jsx)(r.xv,{textAlign:"center",color:"gray.600",children:t})]})}}}]);
//# sourceMappingURL=482.95ce18fa.chunk.js.map